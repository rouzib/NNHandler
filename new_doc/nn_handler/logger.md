# Logger Module

The `logger` module provides a simple interface for setting up logging in the NNHandler framework. It's designed to work seamlessly with distributed training environments, ensuring that logs are only generated by the primary process (rank 0) to avoid duplicate or interleaved log entries.

## Overview

The module contains a single function, `initialize_logger`, which creates and configures a Python `logging.Logger` instance with the specified settings. The logger can output to the console, a file, or both, and supports various logging levels.

## Functions

### `initialize_logger`

```python
@on_rank(0)
def initialize_logger(
        logger_name: str,
        mode: LoggingMode = LoggingMode.CONSOLE,
        filename: str = "NNHandler.log",
        level: int = logging.INFO) -> Optional[logging.Logger]:
```

Creates and configures a logger instance. This function is decorated with `@on_rank(0)`, meaning it only executes on the primary process (rank 0) in a distributed setting. On other ranks, it returns `None`.

#### Parameters:

- `logger_name` (str): The name of the logger, used to identify log messages.
- `mode` (LoggingMode): Determines where logs are output. Options are:
  - `LoggingMode.CONSOLE`: Output logs to the console only.
  - `LoggingMode.FILE`: Output logs to a file only.
  - `LoggingMode.BOTH`: Output logs to both console and file.
- `filename` (str): The path and name of the log file (only used if `mode` is `FILE` or `BOTH`).
- `level` (int): The minimum logging level to record. Common values are:
  - `logging.DEBUG`: Detailed information, typically useful only for diagnosing problems.
  - `logging.INFO`: Confirmation that things are working as expected.
  - `logging.WARNING`: Indication that something unexpected happened, but the program is still working.
  - `logging.ERROR`: Due to a more serious problem, the program has not been able to perform some function.
  - `logging.CRITICAL`: A serious error, indicating that the program itself may be unable to continue running.

#### Returns:

- `logging.Logger` or `None`: A configured logger instance if on rank 0, otherwise `None`.

## Usage Example

```python
import logging
from src.nn_handler.logger import initialize_logger
from src.nn_handler.utils.enums import LoggingMode

# Create a logger that outputs to both console and file
logger = initialize_logger(
    logger_name="MyTrainingRun",
    mode=LoggingMode.BOTH,
    filename="training_logs/run_001.log",
    level=logging.INFO
)

# Use the logger (only works on rank 0)
if logger:
    logger.info("Training started")
    logger.warning("Learning rate might be too high")
    logger.error("Failed to load checkpoint")
```

## Notes

- The logger uses a formatted output that includes the log level, timestamp, logger name, function name, and line number.
- If a log directory doesn't exist, the function attempts to create it.
- If a logger with the same name already exists, the function returns the existing logger without adding new handlers to avoid duplicate log entries.
- In a distributed setting, logging should be handled carefully to avoid file conflicts or interleaved console output. This module ensures that only the primary process (rank 0) performs logging operations.